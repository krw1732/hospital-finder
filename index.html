<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ë‚´ ì£¼ë³€ ë³‘ì› ì°¾ê¸°</title>
    <style>
      body {
        margin: 0;
        font-family: 'ë§‘ì€ ê³ ë”•', sans-serif;
      }
      #map {
        height: 90vh;
        width: 100%;
      }
      #message {
        text-align: center;
        padding: 10px;
        color: red;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h2 style="text-align:center;">ğŸ¥ ë‚´ ì£¼ë³€ ë³‘ì› ì°¾ê¸°</h2>
    <div id="message"></div>
    <div id="map"></div>

    <script>
      let map;

      function showMessage(text) {
        document.getElementById("message").textContent = text;
      }

      function initMap() {
        if (location.protocol !== "https:" && location.hostname !== "localhost") {
          showMessage("âš ï¸ ìœ„ì¹˜ ì •ë³´ë¥¼ ìœ„í•´ HTTPS ì ‘ì†ì´ í•„ìš”í•©ë‹ˆë‹¤.");
          return;
        }

        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            position => {
              const userLocation = {
                lat: position.coords.latitude,
                lng: position.coords.longitude
              };

              map = new google.maps.Map(document.getElementById("map"), {
                center: userLocation,
                zoom: 15
              });

              new google.maps.Marker({
                position: userLocation,
                map: map,
                title: "í˜„ì¬ ìœ„ì¹˜",
                icon: {
                  url: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png"
                }
              });

              const request = {
                location: userLocation,
                radius: '2000',
                type: ['hospital']
              };

              const service = new google.maps.places.PlacesService(map);
              service.nearbySearch(request, (results, status) => {
                if (status === google.maps.places.PlacesServiceStatus.OK && results.length > 0) {
                  results.forEach(place => {
                    new google.maps.Marker({
                      map,
                      position: place.geometry.location,
                      title: place.name
                    });
                  });
                } else {
                  showMessage("ğŸ“ ê·¼ì²˜ ë³‘ì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                }
              });
            },
            error => {
              showMessage("ğŸ“ ìœ„ì¹˜ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
            }
          );
        } else {
          showMessage("ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì •ë³´ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
      }
    </script>

    <!-- Google Maps API (YOUR_API_KEY ë¶€ë¶„ êµì²´ í•„ìˆ˜) -->
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places&callback=initMap" async defer></script>
  </body>
</html>

